{"version":3,"file":"tbls_onload.js","sourceRoot":"","sources":["../../../ts/src/bball/tbls_onload.ts"],"names":[],"mappings":"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","sourcesContent":["\nimport { Tbl } from \"./tbl\";\nimport { searchPlayer } from \"./player.js\";\nimport { base, foldedLog } from \"../global.js\";\n\nconst getRGRow = (d: any, i: number) => {\n    const player = d.top_scorers[i];\n    const game = d.recent_games.find(\n        (g: any) => g.player_id === player.player_id\n    );\n    return { player, game };\n};\n\n\n// top scorers from most recent day of games\nexport async function makeRgTopScorersTbl(numRows: number): Promise<void> {\n    let datasrc = `${base}/games/recent`;\n    let r = await fetch(datasrc);\n    const data = await r.json();\n    foldedLog(`attempting to build RgTopScorers table...`);\n    console.log(data);\n    const rows = Math.min(\n        numRows,\n        data.top_scorers.length,\n    );\n    new Tbl(\n        'tstbl', \n        `Top ${rows} Scorers | ${data.recent_games[0].game_date}`,\n        rows, data, [\n            {\n                header: 'rank',\n                value: (_, i) => String(i + 1),\n            }, {\n                header: 'name | team',\n                value: (d, i) => {\n                    const { player, game } = getRGRow(d, i);\n                    return `${player.player} | ${game.team}`;\n\n                },\n                button: {\n                    onClick: async (v) => searchPlayer('button', v.split(\" | \")[0]),\n                },\n            }, {\n                header: 'matchup',\n                value: (d, i) => {\n                    const { game } = getRGRow(d, i);\n                    return game.matchup;\n                },\n            }, {\n                header: 'wl | score',\n                value: (d, i) => {\n                    const { game } = getRGRow(d, i);\n                    return `${game.wl} | ${game.points}-${game.opp_points}`;\n                },\n             }, {\n                header: 'points',\n                value: (d, i) => String(d.top_scorers[i].points),\n            },\n        ]\n    ).init();\n}\n\n// top scorers in the current season\nexport async function makeLgTopScorersTbl(numRows: number): Promise<void> {\n    let datasrc = `${base}/league/scoring-leaders?num=${numRows}`;\n    let r = await fetch(datasrc);\n    const data = await r.json();\n    new Tbl(\n        'nba_tstbl', \n        `Scoring Leaders | NBA/WNBA Top ${numRows}`,\n        numRows, data, [\n            {\n                header: \"rank\", \n                value: (_, i) => String(i + 1),\n            }, \n            {\n                header: `nba | ${data.nba[0].season}`, \n                value: (d, i) => `${d.nba[i].player}`,\n                button: {\n                    onClick: async (v) => searchPlayer('button', v.split(\" | \")[0]),\n                }\n            },\n            {\n                header: \"points\",\n                value: (d, i) => String(d.nba[i].points),\n            },\n            {\n                header: `wnba | ${data.wnba[0].season}`,\n                value: (d: any, i) => `${d.wnba[i].player} | ${d.wnba[i].team}`,\n                button: {\n                    onClick: async (v) => searchPlayer('button',v.split(\" | \")[0]),\n                },\n            },\n            {\n                header: \"points\",\n                value: (d, i) => String(d.wnba[i].points),\n            },\n        ]\n    ).init();\n}\n\nexport async function makeTeamRecordsTbl(numRows: number): Promise<void> {\n    let datasrc = `${base}/teamrecs`;\n    let r = await fetch(datasrc);\n    const data = await r.json();\n\n\n    const rows = Math.min(\n        numRows,\n        data.nba_team_records.length,\n        data.wnba_team_records.length\n    );\n\n    new Tbl(\n    \"trtbl\",\n    \"NBA/WNBA Regular Season Team Records\", rows, data,\n    [\n        { header: \"rank\", value: (_, i) => String(i + 1) },\n        {\n            header: `nba | ${data.nba_team_records[0].season}`,\n            value: (d, i) => d.nba_team_records[i].team_long,\n        },\n        {\n            header: \"record\",\n            value: (d, i) => `${d.nba_team_records[i].wins}-${d.nba_team_records[i].losses}`,\n        },\n        {\n            header: `wnba | ${data.wnba_team_records[0].season}`,\n            value: (d, i) => d.wnba_team_records[i].team_long,\n        },\n        {\n            header: \"record\",\n            value: (d, i) => `${d.wnba_team_records[i].wins}-${d.wnba_team_records[i].losses}`,\n        },\n    ],\n    ).init();\n}"]}