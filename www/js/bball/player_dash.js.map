{"version":3,"file":"player_dash.js","sourceRoot":"","sources":["../../../ts/src/bball/player_dash.ts"],"names":[],"mappings":"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","sourcesContent":["import { MSG, foldedLog, foldedErr, scrollIntoBySize, SBL } from \"../global.js\";\nimport { tblColHdrs, tblRowColHdrs } from \"./tbls_resp.js\";\nimport { makeTmPlrImageDiv, fillImageDiv } from \"./elements.js\";\nimport { TopScorer, PlayerResp, playerMeta, RGData, PlayersResp } from \"./resp_types.js\";\nimport { searchPlayer, PlayerSearchType } from \"./player_search.js\";\nimport { setPHold } from \"./inputs.js\";\n\nexport async function fetchAndBuildPlayerDash(pst: PlayerSearchType = 'submit',\n    playerOverride: string | null = null, rgData?: RGData,\n): Promise<void> {\n    foldedLog(`%fetching pst=${pst} player dash data`, SBL);\n    let data: PlayersResp | null = null;\n    try {\n        data = await searchPlayer(pst, playerOverride, rgData);\n    } catch (e) {\n        foldedErr(`error searching player with player search type ${pst}`);\n        return;\n    }\n    if (!data) throw new Error(`error getting data for search type ${pst}`);\n\n    const playerResp = data.player[0];\n    const player = playerResp.player_meta.player;\n    foldedLog(`%cbuilding pst=${pst} dash for player ${player}`, SBL);\n    try {\n        await setPHold(player);\n        await buildPlayerDash(playerResp, rgData ?? null);\n    } catch (e) {\n        foldedErr(`error building player with player search type ${pst}`);\n        return;\n    }\n    if (pst !== 'onload') scrollIntoBySize(1350, 1250, \"player_title\");\n}\n\n// accept player dash data, build tables/fetch images and display on screen\nasync function buildPlayerDash(data: PlayerResp, ts: TopScorer): Promise<void> {\n    try {\n        await fillImageDiv(makeTmPlrImageDiv('dash_imgs', {\n            tm_url: data.player_meta.team_logo_url,\n            tm: data.player_meta.team,\n            plr_url: data.player_meta.headshot_url,\n            plr: data.player_meta.player,\n        }));\n\n        await respPlayerTitle(data.player_meta, 'resp_ttl', ts);\n        await respPlayerInfo(data, 'resp_subttl');\n\n        // box stat tables\n        await tblColHdrs(data.totals.box_stats, data.player_meta.cap_box_tot, 'box_tot');\n        await tblColHdrs(data.per_game.box_stats, data.player_meta.cap_box_avg, 'box_avg');\n\n        // shooting stats tables\n        await tblRowColHdrs(data.totals.shooting, data.player_meta.cap_shtg_tot, 'shot type', 'stg_tot');\n        await tblRowColHdrs(data.per_game.shooting, data.player_meta.cap_shtg_avg, 'shot type', 'stg_avg');\n    } catch (e) {\n        foldedErr(`error building ${ts ? 'top scorer' : ''} player dash for ${data.player_meta.player}: ${e}`);\n        return;\n    }\n    foldedLog(`%cbuilt ${ts ? 'top scorer' : ''} player dash for ${data.player_meta.player}`, MSG);\n}\n\n// ts is nothing \n// in that case, ts exists and should be the object returned from /games/recent\nasync function respPlayerTitle(data: playerMeta, elId: string, ts: TopScorer) {\n    const rTitle = document.getElementById(elId);\n\n    if (!rTitle) throw new Error(`couldnt' get response title element at ${elId}`);\n\n    if (ts) {\n        rTitle.innerHTML = `\n        Top Scorer from ${ts.recent_games[0].game_date}<br>${data.caption}\n         | ${ts.top_scorers[0].points} pts | \n         ${ts.top_scorers[0].assists} ast |\n         ${ts.top_scorers[0].rebounds} reb`;    \n    } else {\n        rTitle.textContent = data.caption;\n    }\n}\n\nasync function respPlayerInfo(data: PlayerResp, elId: string) {\n    const cont = document.getElementById(elId);\n    if (!cont) throw new Error(`couldnt' get response title element at ${elId}`);\n    cont.textContent = '';\n    const d = document.createElement('div');\n    const s = document.createElement('h2');\n    const u = document.createElement('h3');\n    s.textContent = data.player_meta.season;\n    u.textContent = `${data.playtime.games_played} Games Played | \n        ${data.playtime.minutes} Minutes | \n        ${data.playtime.minutes_pg} Minutes/Game`;\n    d.appendChild(s);\n    d.appendChild(u);\n    cont.appendChild(d);\n}"]}