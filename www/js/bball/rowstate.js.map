{"version":3,"file":"rowstate.js","sourceRoot":"","sources":["../../../ts/src/bball/rowstate.ts"],"names":[],"mappings":"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","sourcesContent":["import { MSG, SBL, foldedLog, WINDOWSIZE, BIGWINDOW, LARGEROWS } from \"../global.js\";\nimport { rebuildContent } from \"./onload.js\";\nimport { RGData } from \"./resp_types.js\";\n\n// counter class for number of rows displayed per table\nexport class rowNum {\n    minR: number;\n    maxR: number;\n    constructor(private val: number, minR = 1, maxR = 100) { this.minR = minR;  this.maxR = maxR};\n    get value(): number {\n        return this.val;\n    }\n    private snap(val: number): number {\n        if (val <= 1) return 1;\n        return Math.ceil(val / 5) * 5;  \n    }\n\n    increase = (by = 5): number => {\n        const now = this.val;\n        this.val = this.snap(Math.min(this.maxR, this.val + by));\n        foldedLog(`%cincrease from ${now} to ${this.val}`, SBL);\n        return this.val;\n    }\n\n    decrease = (by = 5): number => {\n        const now = this.val;\n        this.val = this.snap(Math.max(this.minR , this.val - by));\n        foldedLog(`%cdecrease from ${now} to ${this.val}`, SBL);\n        return this.val;\n    }\n\n    reset = (to?: number): number => {\n        const now = this.val;\n        if (to) {\n            this.val = Math.max(this.minR, to);\n        } else {\n            this.val = window.innerWidth <= WINDOWSIZE ? 5 : 10;\n        }\n        foldedLog(`%creset from ${now} to ${this.val}`, SBL);\n        return this.val;\n    }\n    max = (): number => {\n        foldedLog(`%cmax rows requested: current ${this.val} to ${this.maxR}`, SBL);\n        this.val = this.maxR;\n        return this.val;\n    }\n    min = (): number => {\n        foldedLog(`%cmin rows requested: current ${this.val} to ${this.minR}`, SBL);\n        this.val = this.minR;\n        return this.val;\n    }\n};\n// tracks row counters for both top scorer tables\nexport class rowsState {\n    lgRowNum: rowNum;\n    lgRowLarge: number = LARGEROWS;\n    rgRowNum: rowNum;\n    trRowNum: rowNum;\n    startRows: number;\n    rgData?: RGData;\n    constructor(rgData?: RGData, winSize: number = WINDOWSIZE, bigWinSize: number = BIGWINDOW) {\n        let rgRows = rgData?.top_scorers?.length ?? 30;\n        this.startRows = window.innerWidth <= winSize ? 5 : 10;\n        if (window.innerWidth >= bigWinSize) { \n            this.lgRowNum = new rowNum(this.lgRowLarge);\n        } else {\n            this.lgRowNum = new rowNum(this.startRows);\n        }\n        this.trRowNum = new rowNum(this.startRows, 1, 30);\n        this.rgRowNum = new rowNum(this.startRows, 1, rgRows);\n        this.rgData = rgData;\n        this.listenForResize();\n    };\n    resetRows(winSize: number = WINDOWSIZE, bigWinSize: number = BIGWINDOW): number {\n        let rows: number = window.innerWidth <= winSize ? 5 : 10;\n        this.rgRowNum.reset(rows);\n        this.trRowNum.reset(rows);\n        if (window.innerWidth >= bigWinSize) {\n            foldedLog(`%cresetting rows for big screen: ${this.lgRowLarge}`, MSG)\n            this.lgRowNum.reset(this.lgRowLarge);\n        } else {\n            this.lgRowNum.reset(rows);\n        }\n        return rows;\n    }\n    listenForResize(winSize: number = WINDOWSIZE, bigWinSize: number = BIGWINDOW) {\n        const small_mq = window.matchMedia(`(max-width: ${winSize}px)`);\n        const large_mq = window.matchMedia(`(min-width: ${bigWinSize}px)`);\n        small_mq.addEventListener('change', async () => { await this.handleMediaQueries(); });\n        large_mq.addEventListener('change', async () => { await this.handleMediaQueries(); });\n    }\n    async handleMediaQueries() {\n        this.resetRows();\n        await rebuildContent(this.trRowNum.value, this.lgRowNum.value, this.rgRowNum.value, this.rgData);\n    }\n};\n\n"]}