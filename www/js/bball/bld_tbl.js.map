{"version":3,"file":"bld_tbl.js","sourceRoot":"","sources":["../../../ts/src/bball/bld_tbl.ts"],"names":[],"mappings":"AAAA,0CAA0C;AAC1C,2EAA2E;AAE3E,OAAO,EAAE,SAAS,EAAE,GAAG,EAAE,MAAM,cAAc,CAAC;AAI9C,mBAAmB;AACnB,MAAM,CAAC,KAAK,UAAU,OAAO,CAAC,IAAS,EAAE,UAAkB,EAAE,KAAa,EACtE,MAAgB,EAAE,eAAuB,EAAE,OAAc;IAEzD,SAAS,CAAC,2CAA2C,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;IAElF,MAAM,GAAG,GAAG,QAAQ,CAAC,cAAc,CAAC,UAAU,CAA4B,CAAC;IAC3E,IAAI,CAAC,GAAG;QAAE,MAAM,IAAI,KAAK,CAAC,uCAAuC,UAAU,EAAE,CAAC,CAAC;IAC/E,GAAG,CAAC,WAAW,GAAG,EAAE,CAAC;IAErB,IAAI,IAAI,GAAG,aAAa,CAAC,KAAK,CAAC,CAAC;IAChC,IAAI,CAAC,IAAI,EAAE,CAAC;QACR,MAAM,IAAI,KAAK,CAAC,kDAAkD,KAAK,GAAG,CAAC,CAAC;IAChF,CAAC;IACD,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IAEtB,IAAI,GAAG,GAAG,YAAY,CAAC,MAAM,CAAC,CAAC;IAC/B,IAAI,CAAC,GAAG,EAAE,CAAC;QACP,MAAM,IAAI,KAAK,CAAC,4CAA4C,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAC1F,CAAC;IACD,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;IAErB,iBAAiB;IACjB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,eAAe,EAAE,CAAC,EAAE,EAAE,CAAC;QACvC,MAAM,OAAO,CAAC,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;IAChC,CAAC;AACL,CAAC;AAED,SAAS,aAAa,CAAC,KAAa;IAChC,IAAI,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAmC,CAAC;IAC/E,IAAI,CAAC,IAAI;QAAE,OAAO,IAAI,CAAA;IACtB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;IACzB,OAAO,IAAI,CAAC;AAChB,CAAC;AAED,SAAS,YAAY,CAAC,MAAgB;IAClC,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;IAC5C,KAAK,IAAI,GAAG,IAAI,MAAM,EAAE,CAAC;QACrB,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAgC,CAAC;QACrE,IAAI,CAAC,EAAE;YAAE,OAAO,IAAI,CAAC;QACrB,EAAE,CAAC,WAAW,GAAG,GAAG,CAAC;QACrB,KAAK,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;IAC1B,CAAC;IACD,OAAO,KAAK,CAAC;AACjB,CAAC","sourcesContent":["// replaces /www/js/bball/dynamic_table.js\n// dynamic replacement for lg_ldg_scorers.js, rg_ldg_scorer.js, reamrecs.js\n\nimport { foldedLog, MSG } from \"../global.js\";\n\ntype RowFn = (idx: number, tbl: HTMLTableElement, data: any) => Promise<void>\n\n// build full table\nexport async function table5f(data: any, element_id: string, title: string,\n    fields: string[], rows_to_display: number, rowfunc: RowFn\n): Promise<void> {\n    foldedLog(`%cbuilding table from object with keys: ${Object.keys(data)}...`, MSG);\n\n    const tbl = document.getElementById(element_id) as HTMLTableElement | null;\n    if (!tbl) throw new Error(`no table element found with element ${element_id}`);\n    tbl.textContent = \"\";    \n\n    let capt = getTblCaption(title);\n    if (!capt) {\n        throw new Error(`failed making table caption from passed title {${title}}`);\n    }\n    tbl.appendChild(capt);\n\n    let hdr = getTblHdrRow(fields);\n    if (!hdr) {\n        throw new Error(`failed making header row passed fields: {${console.table(fields)}}`);\n    }\n    tbl.appendChild(hdr);\n    \n    // build each row\n    for (let i = 0; i < rows_to_display; i++) {       \n        await rowfunc(i, tbl, data);\n    }\n}\n\nfunction getTblCaption(title: string): HTMLTableCaptionElement | null {\n    let capt = document.createElement('caption') as HTMLTableCaptionElement | null;\n    if (!capt) return null\n    capt.textContent = title;\n    return capt;\n}\n\nfunction getTblHdrRow(fields: string[]): HTMLTableSectionElement | null {\n    let thead = document.createElement('thead');\n    for (let fld of fields) {\n        let el = document.createElement('td') as HTMLTableCellElement | null;\n        if (!el) return null;\n        el.textContent = fld;\n        thead.appendChild(el);\n    }\n    return thead;\n}"]}