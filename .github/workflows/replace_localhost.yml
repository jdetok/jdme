name: Replace localhost URLs
on:
  push:
    branches:
        - ci
jobs:
  replace:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./scripts/ci/
    permissions:
        contents: write
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
        with: 
          fetch-depth: 0

      - name: Replace localhost with production URL
        run: python3 ./localhost_to_prod.py

      - name: Commit changes if any
        run: ./check_git_diff.sh